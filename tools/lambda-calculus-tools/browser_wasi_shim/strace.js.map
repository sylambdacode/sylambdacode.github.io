{"version":3,"sources":["../src/strace.ts"],"sourcesContent":["export function strace<T extends object>(\n  imports: T,\n  no_trace: Array<string | symbol>,\n) {\n  return new Proxy(imports, {\n    get(target, prop, receiver) {\n      const f = Reflect.get(target, prop, receiver);\n      if (no_trace.includes(prop) || typeof f !== \"function\") {\n        return f;\n      }\n      return (...args: unknown[]) => {\n        console.log(prop, \"(\", ...args, \")\");\n        const result = Reflect.apply(\n          f as (...fnArgs: unknown[]) => unknown,\n          receiver,\n          args,\n        );\n        console.log(\" =\", result);\n        return result;\n      };\n    },\n  });\n}\n"],"names":["strace","imports","no_trace","Proxy","get","target","prop","receiver","f","Reflect","includes","args","console","log","result","apply"],"mappings":"AAAA,OAAO,SAASA,OACdC,OAAU,CACVC,QAAgC,EAEhC,OAAO,IAAIC,MAAMF,QAAS,CACxBG,IAAIC,MAAM,CAAEC,IAAI,CAAEC,QAAQ,EACxB,MAAMC,EAAIC,QAAQL,GAAG,CAACC,OAAQC,KAAMC,UACpC,GAAIL,SAASQ,QAAQ,CAACJ,OAAS,OAAOE,IAAM,WAAY,CACtD,OAAOA,CACT,CACA,MAAO,CAAC,GAAGG,QACTC,QAAQC,GAAG,CAACP,KAAM,OAAQK,KAAM,KAChC,MAAMG,OAASL,QAAQM,KAAK,CAC1BP,EACAD,SACAI,MAEFC,QAAQC,GAAG,CAAC,KAAMC,QAClB,OAAOA,MACT,CACF,CACF,EACF"}